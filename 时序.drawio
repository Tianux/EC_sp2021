<mxfile host="0375a4e5-df2a-46a3-9d71-1b2a0d795b6f" modified="2020-08-19T02:30:01.357Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code-Insiders/1.49.0-insider Chrome/83.0.4103.122 Electron/9.2.0 Safari/537.36" etag="sdhDRB7iH8_vnXxlYyEb" version="13.1.3">
    <diagram id="6hGFLwfOUW9BJ-s0fimq" name="Page-1">
        <mxGraphModel dx="1563" dy="470" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" background="none" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="121" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="2" target="3" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="150" y="120" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="2" value="&lt;font&gt;Main()&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="80" y="80" width="120" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" source="3" target="5" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="3" value="spPortEnterCritical();&amp;nbsp; 该函数内容如下： uxCriticalNesting++&lt;br&gt;&amp;nbsp; disable_irq()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="80" y="140" width="120" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" source="5" target="7" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="5" value="初始化NVIC中断组&lt;br&gt;NVIC_PriorityGroupConfig&lt;br&gt;4位抢占优先级" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="80" y="230" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" source="7" target="9" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="7" value="电源配置&lt;br&gt;(Power_Configuration)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="80" y="325" width="120" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" source="9" target="11" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="RNG随机数生成器初始化RCC，开RNG" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="80" y="390" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" source="11" target="13" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="全局任务初始化&lt;br&gt;TASK_GlobalInit()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="80" y="665" width="120" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" source="13" target="15" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="13" value="任务定时器初始化" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="80" y="770" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" source="15" target="19" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="15" value="初始化完成后，依据车类型播放音乐" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="80" y="850" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="&amp;nbsp; &amp;nbsp;spPortExitCritical();&amp;nbsp;&lt;br&gt;该函数内容如下： uxCriticalNesting--&lt;br&gt;&amp;nbsp; 为0时enable_irq()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="80" y="1250" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="23" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" source="19" target="17" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="19" value="开始任务循环&lt;br&gt;(Task_Start())&lt;br&gt;将所有用到的外设的NVIC中断全部开启" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="80" y="1049" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="27" value="" style="shape=flexArrow;endArrow=classic;html=1;strokeColor=#67AB9F;fontColor=#000000;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="7" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="320" y="340" as="sourcePoint"/>
                        <mxPoint x="320" y="300" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="31" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" source="29" target="30" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="29" value="如果是使用A类型板，执行代码&lt;br&gt;(define SP_USING_BOARD_TYPEA)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="349" y="190" width="121" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" source="30" target="32" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="30" value="开GPIOH_RCC时钟" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="349" y="270" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="41" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" source="32" target="40" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="32" value="H2,H3,H4,H5&lt;br&gt;初始化为推挽，上拉，100MHz速度" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="349" y="350" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="40" value="H2,H3,H4,H5置位" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="349" y="430" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="34" value="根据接线进一步&lt;br&gt;判断这段代码的作用" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="250" y="360" width="30" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="42" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="320" y="220" width="20" height="240" as="geometry"/>
                </mxCell>
                <mxCell id="52" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" source="49" target="51" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="49" value="初始化LED&lt;br&gt;初始化LED8&lt;br&gt;初始化Buzzer&lt;br&gt;初始化CAN1,CAN2" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="349" y="532.5" width="120" height="67.5" as="geometry"/>
                </mxCell>
                <mxCell id="54" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" source="51" target="53" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="51" value="初始化DMA" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="349" y="630" width="120" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="57" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" source="53" target="56" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="53" value="初始化串口8 TX,RX，开串口8" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="349" y="692.5" width="120" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="67" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" source="56" target="66" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="56" value="初始化串口3 TX,RX,&lt;br&gt;配置DMA,开串口中断,开串口" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="349" y="762.5" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="76" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="66" target="75" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="66" value="如果使用USB&lt;br&gt;自瞄初始化" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="349" y="902.5" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="75" value="根据版型" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="349" y="1042.5" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="48" value="这俩LED是干啥的？&lt;br&gt;DMA初始化代码在做什么？" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="535" y="562.5" width="30" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="58" value="串口波特率115200&lt;br&gt;用途分别是什么？" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="515" y="722.5" width="30" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="63" value="" style="shape=flexArrow;endArrow=classic;html=1;strokeColor=#67AB9F;fontColor=#000000;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="320" y="677" as="sourcePoint"/>
                        <mxPoint x="200" y="677" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="64" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="320" y="557.5" width="20" height="240" as="geometry"/>
                </mxCell>
                <mxCell id="68" value="串口的作用&lt;br&gt;&lt;br&gt;2:自瞄" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
                    <mxGeometry x="762" y="830" width="80" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="74" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="70" target="73" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="70" value="注册USB回调池&lt;br&gt;判断回调池数组中是否已经有结构体" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="520" y="840" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="73" value="初始化串口2 TX RX&lt;br&gt;初始化DMA，开中断，开串口" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="520" y="940" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="77" value="初始化部分，&lt;br&gt;还有一部分代码需要研究" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="469" y="1049" width="30" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="78" value="SP_IRQ等涉及中断的函数&lt;br&gt;&lt;br&gt;&lt;br&gt;通过重写函数实现了对一个中断执行回调函数池中所有的函数&lt;br&gt;回调函数池是一个回调结构体类型(自定义类型)的数组，其中存储了所有需要回调的函数信息&lt;br&gt;&lt;br&gt;回调函数类型实际上是标准void函数类型，使用typedef进行类型重命名&lt;br&gt;回调结构体类型可用于链表类型&lt;br&gt;包含中断类型、中断请求标志位(32位)、中断回调函数及链表的next地址&lt;br&gt;&lt;br&gt;有些中断可能涉及到不同外设，例如存在TIM1_TRG_COM_TIM11_IRQn这种同时涉及TIM1和TIM11的中断，因此需要中断请求标志位来判断" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="870" y="665" width="278" height="220" as="geometry"/>
                </mxCell>
                <mxCell id="84" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="82" target="83" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="82" value="初始化定时器RCC，初始化定时器&lt;br&gt;以1000Hz，每1ms触发一次中断&lt;br&gt;注册NVIC中断，开启定时器" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-170" y="537.5" width="120" height="85" as="geometry"/>
                </mxCell>
                <mxCell id="86" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="83" target="85" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="83" value="将spClockHandler加入该定时器中断回调函数" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-170" y="700" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="101" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="97" target="83" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="97" value="这个函数实际上用于&lt;br&gt;全局变量spClock的ms++" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-370" y="700" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="105" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="85" target="104" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="85" value="将PendSV_Handler加入该定时器中断回调函数" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-170" y="842.5" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="104" value="开启该定时器的NVIC中断" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="-170" y="982.5" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="90" value="使用的是一个叫做spSYSTEMER的定时器&lt;br&gt;各种重命名定时器在sp_conf.h中进行定义" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="-250" y="565" width="42" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="102" value="这个函数是实际上的主循环函数&lt;br&gt;上层函数的上层函数&lt;br&gt;对于主循环函数及其上层函数&lt;br&gt;的结构图另外绘制" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="-224" y="827.5" width="42" height="82.5" as="geometry"/>
                </mxCell>
                <mxCell id="106" value="" style="shape=flexArrow;endArrow=classic;html=1;strokeColor=#67AB9F;fontColor=#000000;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="13" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="-20" y="800" as="sourcePoint"/>
                        <mxPoint x="-200" y="649.5" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="107" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;strokeColor=#67AB9F;fontColor=#000000;rotation=-180;" parent="1" vertex="1">
                    <mxGeometry x="-50" y="570" width="30" height="450" as="geometry"/>
                </mxCell>
                <mxCell id="123" value="spClock可能只是一个全局的运行时间函数，&lt;br&gt;但究竟用于做什么呢？&lt;br&gt;毕竟实际上时间体循环是在ControllerLoop那边做的" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="-420" y="692.5" width="42" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="126" value="另外对spClock的补充说明如下&lt;br&gt;包含ms和us两个成员变量&lt;br&gt;ms为32位无符号整型&lt;br&gt;us为32位无符号整型的地址，&lt;br&gt;us实际上保存着spSYSTEMER的计数器计数值&lt;br&gt;针对这一变量，对应有获取时间戳，毫秒，微秒地址等函数配套" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="-610" y="755" width="42" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="129" value="PendSV_Handle()" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="100" y="1560" width="120" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="139" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="133" target="138" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="133" value="SCB-&amp;gt;ICSR |=((uint32_t)1&amp;lt;&amp;lt;27);" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="280" y="1500" width="120" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="138" value="Task_Backend()&lt;br&gt;(1 ms执行一次)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="280" y="1620" width="120" height="21" as="geometry"/>
                </mxCell>
                <mxCell id="130" value="&lt;font style=&quot;font-size: 36px&quot;&gt;初始化函数&lt;br&gt;尚未总结完成&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-413" y="290" width="390" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="131" value="&lt;font style=&quot;font-size: 36px&quot;&gt;主循环函数&lt;br&gt;为多个函数嵌套完成&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-410" y="1501" width="390" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="132" value="总结实际上应当分为初始化函数、主循环函数及各中断函数&lt;br&gt;&lt;br&gt;尽管主循环函数也是中断函数的其中一个&lt;br&gt;但是必然存在其他未出现于主循环函数的中断函数&lt;br&gt;&lt;br&gt;同时，对各结构体和配套变量的理解放到最后。由于采用了完全的库重写，底层库、中层库等混在一起，因此需要考虑重写" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="900" y="1140" width="180" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="143" value="" style="shape=flexArrow;endArrow=classic;html=1;strokeColor=#67AB9F;fontColor=#000000;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="260" y="1570.08" as="sourcePoint"/>
                        <mxPoint x="220" y="1569.58" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="144" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;strokeColor=#67AB9F;fontColor=#000000;" parent="1" vertex="1">
                    <mxGeometry x="260" y="1515" width="20" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="145" value="&lt;font color=&quot;#000000&quot; style=&quot;background-color: rgb(255 , 255 , 255)&quot;&gt;仍然需要进一步的研究&lt;br&gt;鬼知道为什么这么一行代码&lt;br&gt;为什么要专门用一个母函数包起来&lt;br&gt;其函数命名仍需进一步的理解&lt;/font&gt;" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
                    <mxGeometry x="430" y="1490" width="30" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="150" value="&lt;font color=&quot;#000000&quot;&gt;主循环的母函数&lt;/font&gt;" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
                    <mxGeometry x="360" y="1650" width="30" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="149" value="" style="shape=flexArrow;endArrow=classic;html=1;strokeColor=#67AB9F;fontColor=#000000;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" target="138" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="470" y="1631" as="sourcePoint"/>
                        <mxPoint x="495" y="1719.9999999999998" as="targetPoint"/>
                        <Array as="points"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="152" value="版型为0或1时&lt;br&gt;RC_ReceiverChecker(ctime);&lt;br&gt;ctime为当前的毫秒计时&lt;br&gt;即spClock.ms&lt;br&gt;系统时钟的毫秒计数" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="470" y="1625" width="180" height="39.75" as="geometry"/>
                </mxCell>
                <mxCell id="189" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="159" target="165" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="852" y="1830"/>
                            <mxPoint x="750" y="1830"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="159" value="&lt;font color=&quot;#ffffff&quot;&gt;否则&lt;br&gt;30ms后将task_inited置为真&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="762" y="1714" width="180" height="39.75" as="geometry"/>
                </mxCell>
                <mxCell id="194" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="165" target="193" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="165" value="&lt;font color=&quot;#ffffff&quot;&gt;将task_inited置为真&lt;br&gt;TIM1_TRG_COM_TIM11_IRQn&lt;br&gt;TIM8_BRK_TIM12_IRQn&lt;br&gt;开启NVIC中断&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="660" y="1900" width="180" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="209" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="193" target="208" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="193" value="&lt;span style=&quot;color: rgb(255 , 255 , 255)&quot;&gt;task_inited=true时&lt;/span&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;br&gt;TASK_ControlLooper();&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="660" y="2019.75" width="180" height="39.75" as="geometry"/>
                </mxCell>
                <mxCell id="199" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="168" target="198" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="168" value="&lt;font color=&quot;#ffffff&quot;&gt;每过10ms&lt;br&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1010" y="1625" width="180" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="202" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="198" target="201" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="214" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="198" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1300.0000000000005" y="2703.333333333333" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="198" value="&lt;font color=&quot;#ffffff&quot;&gt;&lt;div&gt;如果USING_GIMBAL_MODE==1&lt;span&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; spGIMBAL_Controller._system.looper();&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;云台控制的循环吧&lt;/span&gt;&lt;/div&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1010" y="1725" width="180" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="201" value="&lt;font color=&quot;#ffffff&quot;&gt;&lt;div&gt;不管什么车&lt;/div&gt;&lt;div&gt;spMOTOR._system.looper();&lt;br&gt;&lt;/div&gt;&lt;div&gt;底盘电机的循环吧&lt;/div&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1010" y="1825" width="180" height="55" as="geometry"/>
                </mxCell>
                <mxCell id="190" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="182" target="159" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="191" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="182" target="157" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="182" value="&lt;font color=&quot;#ffffff&quot;&gt;初始task_inited为假&lt;br&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="670" y="1634.87" width="180" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="212" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="184" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1380.0000000000005" y="2523.3333333333335" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="184" value="&lt;div style=&quot;color: rgb(255 , 255 , 255)&quot;&gt;spCAN._system.transmit_looper(CAN1);&lt;/div&gt;&lt;div style=&quot;color: rgb(255 , 255 , 255)&quot;&gt;spCAN._system.transmit_looper(CAN2);&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1250" y="1625" width="231" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="167" value="&lt;font color=&quot;#000000&quot;&gt;对于各版型的作用和定义，&lt;br&gt;需要进一步探索&lt;br&gt;&lt;/font&gt;" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
                    <mxGeometry x="530" y="1780" width="30" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="188" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="157" target="165" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="157" value="&lt;font color=&quot;#ffffff&quot;&gt;USING_GIMBAL_MODE &amp;gt; 0&lt;br&gt;spGIMBAL_Controller._system.regression(tick_init)为真时&lt;/font&gt;&lt;font color=&quot;#ffffff&quot;&gt;&lt;br&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="450" y="1714" width="290" height="46" as="geometry"/>
                </mxCell>
                <mxCell id="195" value="&lt;font color=&quot;#000000&quot;&gt;这部分的子函数需要进一步的探究&lt;/font&gt;" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
                    <mxGeometry x="390" y="1754" width="44" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="204" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;rotation=90;" parent="1" vertex="1">
                    <mxGeometry x="980" y="1160" width="20" height="891" as="geometry"/>
                </mxCell>
                <mxCell id="206" value="&lt;span style=&quot;background-color: rgb(42 , 42 , 42)&quot;&gt;虽然是顺序执行，但实际上相互之间没有条件制约，似乎可以调换顺序&lt;/span&gt;" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
                    <mxGeometry x="975" y="1520" width="30" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="208" value="&lt;font color=&quot;#ffffff&quot;&gt;TASK_ControlLooper();&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="120" y="2380" width="180" height="39.75" as="geometry"/>
                </mxCell>
                <mxCell id="211" value="&lt;font style=&quot;font-size: 36px&quot;&gt;关键主循环函数&lt;br&gt;云台、射击、底盘&lt;br&gt;循环函数分别分布在&lt;br&gt;嵌套函数的不同层&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-305" y="2290" width="390" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="215" value="&lt;font style=&quot;font-size: 24px&quot;&gt;笔记：&lt;br&gt;根据目前所读到的循环体的部分来看，代码似乎希望在通用代码的基础上配合专有代码实现代码尽可能通用和简明话，因此部分代码很可能无法轻易精简&lt;br&gt;应当说这样做使得代码显得略微混乱，之后需要结合竞赛规则和竞赛手册进一步的了解代码的实际意义&lt;br&gt;应当说，这份代码还是具备相当程度的参考价值的，但是是否可能存在超出能力范围的需要修改的部分，仍需要进一步的探究&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="-670" y="2550" width="610" height="330" as="geometry"/>
                </mxCell>
                <mxCell id="239" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="216" target="238" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="216" value="每5秒&lt;br&gt;task_counter % 5 == 3" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="602" y="2280" width="160" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="246" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="241" target="245" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="241" value="每10秒&lt;br&gt;task_counter % 10 == 3" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="842" y="2280" width="160" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="252" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="245">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1350" y="2640" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="245" value="射击主循环&lt;br&gt;Shooting_Control_Looper();" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="842" y="2430" width="160" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="243" value="发送车子的血量&lt;br&gt;task_counter % 3000 == 0 remain_HP作为蓝方1号步兵血量发送&lt;br&gt;task_counter % 3000 == 1000 remain_HP作为蓝方3号步兵血量发送&lt;br&gt;task_counter % 3000 == 2000 remain_HP作为蓝方2号步兵血量发送" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="1080.5" y="2280" width="379.5" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="238" value="与工控机PC交流&lt;br&gt;sendtoComputer();" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="602" y="2430" width="160" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="235" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="219" target="234" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="219" value="每10秒&lt;br&gt;task_counter % 10 == 1" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="362" y="2280" width="160" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="234" value="RC按键判断&lt;br&gt;键位判断见后表" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="362" y="2430" width="160" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="222" value="&lt;font color=&quot;#000000&quot;&gt;其实这一段代码中有一些地方令人疑惑&lt;br&gt;主要是额外变量remain_HP和remain_HP_ex&lt;br&gt;这两个局部静态变量似乎并没有存在的意义，为什么要特别列出呢？&lt;br&gt;另外，attacked_time是用来做什么的？&lt;br&gt;&lt;/font&gt;" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
                    <mxGeometry x="180" y="2500" width="30" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="233" value="与裁判系统交流&lt;br&gt;与RC-遥控器交流，根据attacked_time切换工作模式&lt;br&gt;主射击循环" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="150" y="2430" width="110" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="236" value="&lt;font color=&quot;#000000&quot;&gt;键位判断部分仍需&lt;br&gt;进一步的了解&lt;br&gt;&lt;/font&gt;" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
                    <mxGeometry x="319" y="2450" width="30" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="240" value="&lt;font color=&quot;#000000&quot;&gt;这是做什么的？&lt;br&gt;&lt;/font&gt;" style="shape=umlActor;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1">
                    <mxGeometry x="770" y="2450" width="30" height="60" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>